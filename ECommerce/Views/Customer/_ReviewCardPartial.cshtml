@using ECommerce.Models.Entities
@model Review

<div class="bg-white border border-gray-100 rounded-3xl shadow-sm hover:shadow-lg transition-all duration-300 p-8 group h-full flex flex-col">
    <div class="flex justify-between items-start mb-6">
        <div>
            <div class="flex items-center gap-3 mb-2">
                <h3 class="font-playfair text-xl font-bold text-primary group-hover:text-gold transition-colors line-clamp-1">
                    @(Model.Product?.Name ?? "Product unavailable")
                </h3>
                <span class="inline-flex items-center gap-1 px-3 py-1 bg-cream text-gold text-xs font-bold rounded-full border border-gold/10">
                    @Model.Rating
                    <i class="ph-fill ph-star"></i>
                </span>
            </div>
            <p class="text-xs uppercase tracking-wider text-gray-400 font-bold flex items-center gap-2">
                <i class="ph-bold ph-calendar-blank"></i>
                @Model.CreatedAt.ToString("MMMM dd, yyyy")
            </p>
        </div>

        <form method="post" 
              asp-controller="Customer" 
              asp-action="DeleteReview" 
              asp-route-id="@Model.Id" 
              class="inline"
              onsubmit="return confirm('Are you sure you want to delete this review? This action cannot be undone.');">
            @Html.AntiForgeryToken()
            <button type="submit"
                    class="w-10 h-10 flex items-center justify-center text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-all"
                    title="Delete review">
                <i class="ph-fill ph-trash text-xl"></i>
            </button>
        </form>
    </div>

    <div class="flex items-center gap-4 mb-6">
        <div class="flex text-gold text-lg">
            @for (int i = 1; i <= 5; i++)
            {
                if (i <= Model.Rating)
                {
                    <i class="ph-fill ph-star"></i>
                }
                else
                {
                    <i class="ph ph-star text-gray-200"></i>
                }
            }
        </div>
        <span class="text-xs font-bold text-primary bg-gray-100 px-3 py-1 rounded-lg">
            @switch (Model.Rating)
            {
                case 5:
                    <span>Excellent</span>
                    ; break;
                case 4:

                    <span>Good</span>
                    ; break;
                case 3:

                    <span>Average</span>
                    ; break;
                case 2:

                    <span>Poor</span>
                    ; break;
                case 1:

                    <span>Very Poor</span>
                    ; break;
                default:

                    <span>Rated</span>
                    ; break;
            }
        </span>
    </div>

    <div class="bg-gray-50 rounded-2xl p-6 relative mb-6 flex-grow">
        <i class="ph-fill ph-quotes text-gray-200 text-3xl absolute -top-3 -left-2 bg-white rounded-full p-1"></i>
        <p class="text-gray-600 leading-relaxed italic relative z-10">"@Model.Comment"</p>
    </div>

    <div class="mt-auto border-t border-gray-100 pt-4 flex justify-end">
        <a asp-controller="Customer" 
           asp-action="ProductDetails" 
           asp-route-id="@Model.ProductId"
           class="inline-flex items-center gap-2 text-sm font-bold text-primary hover:text-gold transition-colors group/link">
            <span>View Product</span>
            <i class="ph-bold ph-arrow-right group-hover/link:translate-x-1 transition-transform"></i>
        </a>
    </div>
</div>