@using ECommerce.Models.Entities
@model Product

<div class="group bg-white rounded-2xl overflow-hidden border-2 border-gray-100 hover:border-gold transition-all duration-500 hover:shadow-2xl hover:-translate-y-2">
    <a href="/customer/products/details/@Model.Id" class="block">

        <!-- Product Image -->
        <div class="relative bg-gray-100 overflow-hidden min-h-[280px] max-h-[280px] flex items-center justify-center">
            <div class="absolute inset-0 flex items-center justify-center">
                @if (!string.IsNullOrEmpty(Model.ImageUrl))
                {
                    <img src="@Model.ImageUrl"
                         alt="@Model.Name"
                         class="w-[calc(100%-32px)] h-[calc(100%-32px)] object-contain object-center bg-gray-100 rounded-lg transition-transform duration-500 group-hover:scale-105" />
                }
                else
                {
                    <div class="w-full h-full flex items-center justify-center text-gray-300">
                        <i class="ph ph-image text-8xl"></i>
                    </div>
                }
            </div>

            <!-- Metal Badge -->
            <div class="absolute top-4 right-4 bg-gold/95 backdrop-blur-sm text-white px-4 py-2 rounded-full text-xs font-bold shadow-lg">
                @GetMetalName(Model.Metal)
            </div>

            <!-- Stock Badge -->
            @if (Model.Stock < 5 && Model.Stock > 0)
            {
                <div class="absolute top-4 left-4 bg-yellow-400/95 backdrop-blur-sm text-primary px-4 py-2 rounded-full text-xs font-bold shadow-lg">
                    Only @Model.Stock left!
                </div>
            }
            else if (Model.Stock == 0)
            {
                <div class="absolute top-4 left-4 bg-red-500/95 backdrop-blur-sm text-white px-4 py-2 rounded-full text-xs font-bold shadow-lg">
                    Out of Stock
                </div>
            }
        </div>

        <!-- Product Info -->
        <div class="p-5">
            <p class="text-xs uppercase tracking-wider text-gray-500 mb-2 font-medium">
                @Model.CategoryNames
            </p>

            <h5 class="font-semibold text-lg text-primary mb-2 line-clamp-2 group-hover:text-gold transition-colors">
                @Model.Name
            </h5>

            <p class="text-gray-600 text-sm mb-4 flex items-center space-x-2">
                <i class="ph ph-circle-wavy text-gold"></i>
                <span>@GetMetalName(Model.Metal) @Model.Purity</span>
            </p>

            <div class="flex justify-between items-end">
                <div>
                    <span class="block text-gold font-semibold text-lg mb-4">
                        $@Model.Price.ToString("N2")
                    </span>
                    @if (Model.Stock > 0)
                    {
                        <p class="text-xs text-gray-500 mt-1">
                            <i class="ph ph-check-circle text-green-500"></i>
                            In stock: @Model.Stock units
                        </p>
                    }
                </div>
                <div class="flex items-center space-x-2 bg-gold text-white px-4 py-2 rounded-full text-sm font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300">
                    <span>View</span>
                    <i class="ph ph-arrow-right"></i>
                </div>
            </div>
        </div>
    </a>
</div>

@functions {
    string GetMetalName(string metal)
    {
        return metal switch
        {
            "Gold" => "Gold",
            "Silver" => "Silver",
            "Platinum" => "Platinum",
            _ => metal
        };
    }
}